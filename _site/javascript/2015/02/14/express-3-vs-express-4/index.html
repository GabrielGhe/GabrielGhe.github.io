
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Express 3 vs Express 4</title>
    <meta name="description" content="">
    <meta name="author" content="Gabriel G">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">
    
    <!-- Custom styles -->
    <link href="/assets/themes/bootstrap-3/css/font-mfizz.css" rel="stylesheet" type="text/css" media="all">
    <link href="/assets/themes/bootstrap-3/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">GabrielGhe</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
  
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
  
    
  



            <li>
              <a href="http://github.com/GabrielGhe">
                Github
              </a>
            </li>
          </ul>

          <form id="search" class="navbar-form" role="search" action="/search" method="get" onsubmit="return false;">
            <div id="searchbar" class="form-group" style="display:inline;">
              <!-- Will be removed by React, placeholder so that there's something there while react loads -->
              <div class="input-group">
                <span class="input-group-addon">
                  <span class="glyphicon glyphicon-search"></span>
                </span>
                <input type="search" placeholder="Search" class="form-control" autocomplete="off" />
              </div>
              <!-- up to here -->
            </div>
          </form>
        </div>

        <!-- /.navbar-collapse -->
      </nav>

      <div class="container">
        
<!-- Left Side -->
<div class="row post-full">
  <div class="col-md-9">
    <div class="page-header">
      <h1>
        <i class="icon-javascript" style="font-size:2em"></i> Express 3 vs Express 4 
    </h1>
    </div>
    <div class="date">
      <span>Saturday, February 14, 2015</span>
    </div>
    <div class="content">
      
<!-- Overview -->
<h3>Overview</h3>

<p>This post is all about the differences between Express v3 and v4. You can find more information <a href="http://expressjs.com/guide/migrating-4.html">here</a></p>

<!-- Package.json and server.js -->
<h3>Package.json and server.js</h3>

<p>A lot of middleware was removed and placed into their own modules so that they can get worked on without impacting Express. I’ll show you how you used to make an Express server in v3 and how you make one in v4.</p>

<!-- Express 3-->
<h4>Express 3</h4>

<!-- Code -->

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno">1</span> <span class="c1">// package.json (Express 3.0)</span>
<span class="lineno">2</span> <span class="p">{</span>
<span class="lineno">3</span>   <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;old-express&quot;</span><span class="p">,</span>
<span class="lineno">4</span>   <span class="s2">&quot;main&quot;</span><span class="o">:</span> <span class="s2">&quot;server.js&quot;</span><span class="p">,</span>
<span class="lineno">5</span>   <span class="s2">&quot;dependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
<span class="lineno">6</span>     <span class="s2">&quot;express&quot;</span><span class="o">:</span> <span class="s2">&quot;~3.4.8&quot;</span>
<span class="lineno">7</span>   <span class="p">}</span>
<span class="lineno">8</span> <span class="p">}</span></code></pre></div>

<!-- /Code -->

<!-- Code -->

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="c1">// server.js (Express 3.0)</span>
<span class="lineno"> 2</span> <span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="lineno"> 3</span> <span class="kd">var</span> <span class="nx">app</span>     <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="nx">app</span><span class="p">.</span><span class="nx">configure</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
<span class="lineno"> 6</span>     <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&#39;/public&#39;</span><span class="p">));</span>   <span class="c1">// set the static files location</span>
<span class="lineno"> 7</span>     <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">logger</span><span class="p">(</span><span class="s1">&#39;dev&#39;</span><span class="p">));</span>                   <span class="c1">// log every request to the console</span>
<span class="lineno"> 8</span>     <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">bodyParser</span><span class="p">());</span>                    <span class="c1">// pull information from html in POST</span>
<span class="lineno"> 9</span>     <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="nx">methodOverride</span><span class="p">());</span>                <span class="c1">// simulate DELETE and PUT</span>
<span class="lineno">10</span> <span class="p">});</span>
<span class="lineno">11</span> 
<span class="lineno">12</span> <span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>   
<span class="lineno">13</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Server started on port 3000&#39;</span><span class="p">);</span>           <span class="c1">// notify user</span></code></pre></div>

<!-- /Code -->

<p>Here’s a list of middleWare that was turned into separate modules.</p>

<table>
  <thead>
    <tr>
      <th>Express 3.0 Name</th>
      <th>Express 4.0 Name</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bodyParser</td>
      <td><a href="https://github.com/expressjs/body-parser">body-parser</a></td>
    </tr>
    <tr>
      <td>compress</td>
      <td><a href="https://github.com/expressjs/compression">compression</a></td>
    </tr>
    <tr>
      <td>cookieSession</td>
      <td><a href="https://github.com/expressjs/cookie-session">cookie-session</a></td>
    </tr>
    <tr>
      <td>logger</td>
      <td><a href="https://github.com/expressjs/morgan">morgan</a></td>
    </tr>
    <tr>
      <td>cookieParser</td>
      <td><a href="https://github.com/expressjs/cookie-parser">cookie-parser</a></td>
    </tr>
    <tr>
      <td>session</td>
      <td><a href="https://github.com/expressjs/session">express-session</a></td>
    </tr>
    <tr>
      <td>favicon</td>
      <td><a href="https://github.com/expressjs/favicon">static-favicon</a></td>
    </tr>
    <tr>
      <td>response-time</td>
      <td><a href="https://github.com/expressjs/response-time">response-time</a></td>
    </tr>
    <tr>
      <td>error-handler</td>
      <td><a href="https://github.com/expressjs/errorhandler">errorhandler</a></td>
    </tr>
    <tr>
      <td>method-override</td>
      <td><a href="https://github.com/expressjs/method-override">method-override</a></td>
    </tr>
    <tr>
      <td>timeout</td>
      <td><a href="https://github.com/expressjs/timeout">connect-timeout</a></td>
    </tr>
    <tr>
      <td>vhost</td>
      <td><a href="https://github.com/expressjs/vhost">vhost</a></td>
    </tr>
    <tr>
      <td>csrf</td>
      <td><a href="https://github.com/expressjs/csurf">csurf</a></td>
    </tr>
  </tbody>
</table>

<!-- Express 4-->
<h4>Express 4</h4>

<!-- Code -->

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="c1">// package.json (Express 4.0)</span>
<span class="lineno"> 2</span> <span class="p">{</span>
<span class="lineno"> 3</span>   <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;new-express&quot;</span><span class="p">,</span>
<span class="lineno"> 4</span>   <span class="s2">&quot;main&quot;</span><span class="o">:</span> <span class="s2">&quot;server.js&quot;</span><span class="p">,</span>
<span class="lineno"> 5</span>   <span class="s2">&quot;dependencies&quot;</span><span class="o">:</span> <span class="p">{</span>
<span class="lineno"> 6</span>     <span class="s2">&quot;express&quot;</span><span class="o">:</span> <span class="s2">&quot;~4.0.0&quot;</span><span class="p">,</span>
<span class="lineno"> 7</span>     <span class="s2">&quot;morgan&quot;</span><span class="o">:</span> <span class="s2">&quot;~1.0.0&quot;</span><span class="p">,</span>
<span class="lineno"> 8</span>     <span class="s2">&quot;body-parser&quot;</span><span class="o">:</span> <span class="s2">&quot;~1.0.0&quot;</span><span class="p">,</span>
<span class="lineno"> 9</span>     <span class="s2">&quot;method-override&quot;</span><span class="o">:</span> <span class="s2">&quot;~1.0.0&quot;</span>
<span class="lineno">10</span>   <span class="p">}</span>
<span class="lineno">11</span> <span class="p">}</span></code></pre></div>

<!-- /Code -->

<!-- Code -->

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno"> 1</span> <span class="c1">// server.js (Express 4.0)</span>
<span class="lineno"> 2</span> <span class="kd">var</span> <span class="nx">express</span>        <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;express&#39;</span><span class="p">);</span>
<span class="lineno"> 3</span> <span class="kd">var</span> <span class="nx">morgan</span>         <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;morgan&#39;</span><span class="p">);</span>
<span class="lineno"> 4</span> <span class="kd">var</span> <span class="nx">bodyParser</span>     <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;body-parser&#39;</span><span class="p">);</span>
<span class="lineno"> 5</span> <span class="kd">var</span> <span class="nx">methodOverride</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;method-override&#39;</span><span class="p">);</span>
<span class="lineno"> 6</span> <span class="kd">var</span> <span class="nx">app</span>            <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span> <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">__dirname</span> <span class="o">+</span> <span class="s1">&#39;/public&#39;</span><span class="p">));</span>     <span class="c1">// set the static files location</span>
<span class="lineno"> 9</span> <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">morgan</span><span class="p">(</span><span class="s1">&#39;dev&#39;</span><span class="p">));</span>                             <span class="c1">// log every request to the console</span>
<span class="lineno">10</span> <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">urlencoded</span><span class="p">({</span> <span class="nx">extended</span><span class="o">:</span> <span class="kc">false</span> <span class="p">}));</span><span class="c1">// parse application/x-www-form-urlencoded</span>
<span class="lineno">11</span> <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">bodyParser</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>                         <span class="c1">// parse application/json</span>
<span class="lineno">12</span> <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">methodOverride</span><span class="p">());</span>                          <span class="c1">// simulate DELETE and PUT</span>
<span class="lineno">13</span> 
<span class="lineno">14</span> <span class="nx">app</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3000</span><span class="p">);</span>   
<span class="lineno">15</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Server started on port 3000&#39;</span><span class="p">);</span>         <span class="c1">// shoutout to the user</span></code></pre></div>

<!-- /Code -->

<!-- Routes -->
<h3>Routes</h3>

<!-- Express 3-->
<h4>Express 3</h4>
<!-- Code -->

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno">1</span> <span class="c1">// (Express 3.0)</span>
<span class="lineno">2</span> <span class="nx">app</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/dogs&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">3</span>     <span class="c1">// do stuff</span>
<span class="lineno">4</span> <span class="p">});</span>
<span class="lineno">5</span> 
<span class="lineno">6</span> <span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;/dogs&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">7</span>     <span class="c1">// do stuff </span>
<span class="lineno">8</span> <span class="p">});</span></code></pre></div>

<!-- /Code -->

<!-- Express 4-->
<h4>Express 4</h4>
<!-- Code -->

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="lineno">1</span> <span class="c1">// (Express 4.0)</span>
<span class="lineno">2</span> <span class="nx">app</span><span class="p">.</span><span class="nx">route</span><span class="p">(</span><span class="s1">&#39;/dogs&#39;</span><span class="p">)</span>
<span class="lineno">3</span>     <span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">4</span>         <span class="c1">// do stuff </span>
<span class="lineno">5</span>     <span class="p">})</span>
<span class="lineno">6</span>     <span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">req</span><span class="p">,</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
<span class="lineno">7</span>         <span class="c1">// do stuff </span>
<span class="lineno">8</span>     <span class="p">});</span></code></pre></div>

<!-- /Code -->


    </div>

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#javascript-ref">
    		javascript <span>19</span>
    	</a></li>
    
  


    </ul>
    

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#expressjs-ref">expressjs <span>1</span></a></li>
     
    	<li><a href="/tags.html#nodejs-ref">nodejs <span>7</span></a></li>
     
    	<li><a href="/tags.html#web-ref">web <span>1</span></a></li>
    
  



    </ul>
    
  
    <hr>
    <ul class="pagination">
    
      <li class="prev"><a href="/javascript/2015/02/13/learn-react-part-6-using-node" title="Learn React Part 6: using Node">&laquo; Previous</a></li>
    
      <li><a href="/archive.html">Archive</a></li>
    
      <li class="next"><a href="/javascript/2015/02/14/learn-node-part-1-bower" title="Learn Node Part 1: Bower">Next &raquo;</a></li>
    
    </ul>
    
  </div>
  <!-- END Left Side -->

  <!-- Right Side -->
  <div class="col-md-3">
    <h3>
      Recent Posts
    </h3>
    <hr>
    <ul class="posts">
      
      <li>
         <a href="/javascript/2015/02/14/learn-react-part-7-using-node-and-socketio">Learn React Part 7: using Node and Socket.io</a>
        <hr>
      </li>
      
      <li>
         <a href="/javascript/2015/02/14/learn-node-part-4-angular-minification">Learn Node Part 4: Angular Minification</a>
        <hr>
      </li>
      
      <li>
         <a href="/javascript/2015/02/14/learn-node-part-3-grunt">Learn Node Part 3: Grunt</a>
        <hr>
      </li>
      
      <li>
         <a href="/javascript/2015/02/14/learn-node-part-2-less">Learn Node Part 2: Less</a>
        <hr>
      </li>
      
      <li>
         <a href="/javascript/2015/02/14/learn-node-part-1-bower">Learn Node Part 1: Bower</a>
        <hr>
      </li>
      
    </ul>
  </div>
  <!-- END Right Side -->
</div>


      </div>

    </div>

    <div id="footer">
      <div class="container">
        <p>&copy; 2015 Gabriel G</p>
      </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/assets/themes/bootstrap-3/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.12.2/JSXTransformer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.12.2/react.min.js"></script>
    <script src="/assets/themes/bootstrap-3/lib/lunr.min.js"></script>
    <script type="text/jsx" src="/assets/themes/bootstrap-3/lib/myReact.js"></script>
    <script type="text/jsx" src="/assets/themes/bootstrap-3/../../../search.js"></script>
  </body>
</html>

